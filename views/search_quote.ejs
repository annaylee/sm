<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Get Bootstrap CSS CDN from https://getbootstrap.com/docs/5.2/getting-started/introduction/ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <!-- Get Bootstrap icons CDN from https://icons.getbootstrap.com/#install -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    <!-- Custom CSS with Sass Compiling ( requires npm install bootstrap & VSCode Extension Live Sass Compiler ) -->
    <link rel="stylesheet" href="/css/main.min.css">
    <!-- My Custom Reports CSS -->
    <link rel="stylesheet" href="/css/reports.css">
    <script defer href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>Modify Service Quote</title>
 </head>
<body>

    <%- include('./partials/navbar') %>

    <!-- title -->
    <section>
        <div class="container-lg border rounded-border ps-3 pe-3 bg-altbrown">
            <div class="row justify-content-start align-items-center">
                <div class="col-md-10">
                    <div class="lead text-white fw-bold">MODIFY SERVICE QUOTE</div>
                </div>
                <!-- 
                <div class="col-md-2 d-none d-md-block">
                    <img class="img-fluid" src="/images/power_web.jpg" alt="logo">
                </div> -->
            </div> <!-- end of row -->
        </div> <!-- end of container -->
    </section>

    <section>
        <div class="container-lg border rounded-border mt-0 mb-0 ps-3 pe-3">
            <div class="row justify-content-start align-items-center">
                <div class="col-3">    
                    <form action="/modify/search_quote" method="POST">
                        <div class="input-group">
                            <select name="choices" id="choices" class="form-select">
                                <option label="Select Quote" value=""></option>
                                <% choices.forEach((choice)=>{ %>
                            
                                    <option label="<%=choice.quote%>" 
                                        <%= typeof quote != 'undefined' && quote == choice.quote ? 'selected': ''%>
                                            value="<%=choice.quote%>">
                                    </option>

                                <% });%>
                            </select>
                            <button type="submit" class="btn btn-altbrown btn-sm ms-1 px-2">Go</button> 
                        </div>
                    </form>
                </div>     
            </div> <!-- row -->
        </div>
    </section>

    <section>
        <div class="container-lg mt-0 mb-0 ps-0 pe-0">
            <div class="row justify-content-start align-items-center">
                <div class="col">    
                    <!-- error messages if any -->
                    <%- include('./partials/messages') %>
                </div>
            </div>
        </div>
    </section>
 
    <!-- update quote form -->
    <form action="/modify/update_quote/<%= typeof _id != 'undefined' ? _id: '' %>?_method=PUT" method="POST">
  
    <!-- quote -->
    <section>
        <div class="container-lg border rounded-border">
            <div class="row justify-content-start align-items-center">
                
                <div class="col-lg-3">
                    <label for="quote" class="form-label">QUOTE</label>
                    <input type="text" name="quote" class="form-control" disabled
                           value="<%= typeof quote != 'undefined' ? quote : '' %>">
                </div>

                <div class="col-lg-3">
                    <label for="quote" class="form-label">DATE</label>
                    <input type="text" name="date" class="form-control" 
                           value="<%= typeof date != 'undefined' ? date : '' %>">
                </div>

                <div class="col-lg-3">
                    <label for="quote" class="form-label">VALID UNTIL</label>
                    <input type="text" name="valid_until" class="form-control" 
                           value="<%= typeof valid_until != 'undefined' ? valid_until : '' %>">
                </div>

                <div class="col-lg-3">
                    <label for="quote" class="form-label">PREPARED BY</label>
                    <input type="text" name="prepared_by" class="form-control" 
                           value="<%= typeof prepared_by != 'undefined' ? prepared_by : '' %>">
                </div>

            </div> <!-- end of row -->
        </div> <!-- end of container -->
    </section>

     <!-- customer -->
     <section>
        <div class="container-lg border rounded-border">
            <div class="row justify-content-start align-items-center">
             
                <div class="col-lg-2">
                    <label for="customer_id" class="form-label">CUSTOMER ID</label>
                    <input type="text" name="customer_id" class="form-control" 
                           value="<%= typeof customer_id != 'undefined' ? customer_id : '' %>">
                </div>

                <div class="col-lg-3">
                    <label for="customer_name" class="form-label">COMPANY NAME</label>
                    <input type="text" name="company_name" class="form-control" 
                           value="<%= typeof company_name != 'undefined' ? company_name : '' %>">
                </div>

                <div class="col-lg-4">
                    <label for="customer_address" class="form-label">ADDRESS</label>
                    <input type="text" name="address" class="form-control" 
                           value="<%= typeof address != 'undefined' ? address : '' %>">
                </div>

                <div class="col-lg-3">
                    <label for="customer_contact" class="form-label">CONTACT</label>
                    <input type="text" name="contact" class="form-control" 
                           value="<%= typeof contact != 'undefined' ? contact : '' %>">
                </div>

            </div> <!-- end of row -->
        </div> <!-- end of container -->
    </section>

    <!-- machine -->
    <section>
        <div class="container-lg border rounded-border">
            <div class="row justify-content-start align-items-center mt-0">

                <div class="col-lg-2">
                    <label for="model" class="form-label">MODEL NO.</label>
                    <input type="text" name="model_no" class="form-control" 
                           value="<%= typeof model_no != 'undefined' ? model_no : '' %>">
                </div>

                <div class="col-lg-2">
                    <label for="model" class="form-label">SERIAL NO.</label>
                    <input type="text" name="serial_no" class="form-control" 
                           value="<%= typeof serial_no != 'undefined' ? serial_no : '' %>">
                </div>

                <div class="col-lg-2">
                    <label for="model" class="form-label">MFG. CODE</label>
                    <input type="text" name="mfg_code" class="form-control" 
                           value="<%= typeof mfg_code != 'undefined' ? mfg_code : '' %>">
                </div>

                <div class="col-lg-3">
                    <label for="model" class="form-label">PAYMENT TERMS</label>
                    <input type="text" name="payment_terms" class="form-control" 
                           value="<%= typeof payment_terms != 'undefined' ? payment_terms : '' %>">
                </div>

                <div class="col-lg-3">
                    <label for="model" class="form-label">SPECIAL TERMS</label>
                    <input type="text" name="special_terms" class="form-control" 
                           value="<%= typeof special_terms != 'undefined' ? special_terms: '' %>">
                </div>

             </div> <!-- end of row -->
        </div> <!-- end of container -->
    </section>

    <!-- work to be performed -->
    <section>
        <div class="container-lg border rounded-border">
            <div class="lead text-black fw-bold">WORK TO BE PERFORMED</div>
            <div class="row justify-content-start align-items-center mt-1">
                <div class="col">
                    <!-- do not split the line because it will add extra white spaced to textarea -->
                    <textarea name="work_to_be_performed" class="form-control p-2"><%= typeof work_to_be_performed != 'undefined' ? work_to_be_performed : '' %></textarea>
                </div>
            </div> <!-- end of row -->
         </div> <!-- end of container -->
    </section>


    <!-- terms & conditions -->
    <section>
        <div class="container-lg border rounded-border">
            <!-- Row: -->
            <div class="row mt-1">
                <div class="col-7 col-md-8 col-xl-9 ps-3 pb-3 pt-0 justify-content-start">
                    <label for="">
                        <div class="lead text-black fw-bold">TERMS & CONDITIONS</div>
                        <div class="d-none d-md-block">
                            Parts will be billed separately and immediately after the work is performed. 
                            A special service fee will be applied for work performed during holidays.
                        </div>
                    </label>
                    <div class="mt-1">
                        <input type="checkbox" name="confirmed" 
                               <%= typeof confirmed != 'undefined' ? 'checked' : '' %>>
                               &nbsp;Please confirm your acceptance by signing this document.
                    </div>
                </div>

                <div class="col-5 col-md-4 col-xl-3 ps-3 pb-3 pt-0 justify-content-end">
                    <label for="subtotal" class="lead text-black fw-bold">SUBTOTAL
                            <input type="text" name="subtotal" class="form-control" 
                                   value="<%= typeof subtotal != 'undefined' ? formatter.format(subtotal): '' %>">
                    </label>
                    <label for="discount" class="lead text-black fw-bold">DISCOUNT
                            <input type="text" name="discount" class="form-control" 
                                   value="<%= typeof discount != 'undefined' ? formatter.format(discount) : '' %>">
                    </label>
                    <label for="total" class="lead text-black fw-bold">TOTAL
                            <input type="text" name="total" class="form-control" 
                                   value="<%= typeof total != 'undefined' ? formatter.format(total) : '' %>">
                    </label>
                </div>
            </div> <!-- end of row -->
        </div> <!-- end of container -->
    </section>
 

    <section>
        <div class="container">
            <div class="row justify-content-start align-items-center mt-0">
                <div class="col">
                    <div class="form-group">
                        <button type="submit" 
                                class="btn btn-lg btn-altbrown btn-block fw-bold">
                                Update
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section> 

    </form>

</body>
</html>